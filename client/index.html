<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>AltChain â€“ AI-Powered Global Sourcing</title>
    
    <!-- Favicon with multiple formats for cross-browser compatibility -->
    <link rel="icon" href="/favicon.ico">
    <link rel="shortcut icon" href="/favicon.ico">
    
    <!-- Android Chrome icon -->
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/android-chrome-192x192.png">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" sizes="192x192" href="/assets/android-chrome-192x192.png">
    <link rel="mask-icon" href="/favicon.ico" color="#1760EA">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <meta name="theme-color" content="#1760EA" />
    <!-- Safari-specific favicon refresh directive -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <!-- Dark mode styles with strong overrides -->
    <link rel="stylesheet" href="/dark-mode.css" />
    
    <!-- Inline dark mode styles for immediate effect -->
    <style>
      /* Force dark mode in Replit preview */
      .dark-mode-replit {
        background-color: #121212 !important; /* Darker background */
        color: #ffffff !important; /* Pure white text for maximum contrast */
      }
      
      .dark-mode-replit header, 
      .dark-mode-replit footer {
        background-color: #1e1e1e !important; /* Slightly lighter than body for contrast */
        color: #ffffff !important; /* White text */
      }
      
      .dark-mode-replit .card, 
      .dark-mode-replit .section, 
      .dark-mode-replit .content, 
      .dark-mode-replit .bg-white {
        background-color: #1e1e1e !important; /* Slightly lighter for card readability */
        border-color: #555555 !important; /* Lighter border for visibility */
        color: #ffffff !important; /* White text */
      }
      
      .dark-mode-replit a:not(.bg-primary):not(.primary-btn) {
        color: #81c8ff !important; /* Lighter blue for better contrast */
        text-decoration: underline !important; /* Added underline for better visibility */
      }
      
      .dark-mode-replit input, 
      .dark-mode-replit textarea, 
      .dark-mode-replit select {
        background-color: #2a2a2a !important; /* Lighter for better visibility */
        color: #ffffff !important; /* White text */
        border-color: #666666 !important; /* More visible border */
      }
      
      /* Extra selectors for text contrast */
      .dark-mode-replit h1, 
      .dark-mode-replit h2, 
      .dark-mode-replit h3, 
      .dark-mode-replit h4, 
      .dark-mode-replit h5, 
      .dark-mode-replit h6 {
        color: #ffffff !important; /* Pure white headings */
      }
      
      .dark-mode-replit p, 
      .dark-mode-replit span, 
      .dark-mode-replit div, 
      .dark-mode-replit li {
        color: #ffffff !important; /* White text */
      }
      
      /* System dark mode detection */
      @media (prefers-color-scheme: dark) {
        body {
          background-color: #121212 !important; /* Darker background */
          color: #ffffff !important; /* Pure white text for maximum contrast */
        }
        
        header, footer {
          background-color: #1e1e1e !important; /* Slightly lighter than body for contrast */
          color: #ffffff !important; /* White text */
        }
        
        .card, .section, .content, .bg-white {
          background-color: #1e1e1e !important; /* Slightly lighter for card readability */
          border-color: #555555 !important; /* Lighter border for visibility */
          color: #ffffff !important; /* White text */
        }
        
        a:not(.bg-primary):not(.primary-btn) {
          color: #81c8ff !important; /* Lighter blue for better contrast */
          text-decoration: underline !important; /* Added underline for better visibility */
        }
        
        input, textarea, select {
          background-color: #2a2a2a !important; /* Lighter for better visibility */
          color: #ffffff !important; /* White text */
          border-color: #666666 !important; /* More visible border */
        }
        
        /* Extra selectors for text contrast */
        h1, h2, h3, h4, h5, h6 {
          color: #ffffff !important; /* Pure white headings */
        }
        
        p, span, div, li {
          color: #ffffff !important; /* White text */
        }
      }
    </style>
    
    <!-- Basic SEO -->
    <meta name="description" content="Smarter global sourcing powered by AI. Save time, reduce costs, and avoid trade friction." />
    <meta name="author" content="AltChain" />
    <meta name="keywords" content="global sourcing, AI, suppliers, trade, manufacturing, supply chain" />
    
    <!-- Apple Touch Icon removed for manual implementation -->
    
    <!-- Social Media Preview -->
    <meta property="og:title" content="AltChain - Smarter Global Sourcing" />
    <meta property="og:description" content="AI-powered supplier discovery and trade compliance, made simple." />
    <meta property="og:image" content="/og-image.svg" />
    <meta property="og:url" content="https://www.altchain.app" />
    <meta name="twitter:card" content="summary_large_image" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6DPJBFBYP2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6DPJBFBYP2');
    </script>
    
    <!-- Dark mode detection -->
    <script>
      // Check for dark mode preference and set data-theme attribute
      function setDarkModeIfPreferred() {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          document.documentElement.setAttribute('data-theme', 'dark');
        }
        
        // Listen for changes in dark mode preference
        try {
          const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
          
          // Use the appropriate event listener based on browser support
          if (darkModeMediaQuery.addEventListener) {
            darkModeMediaQuery.addEventListener('change', e => {
              document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');
            });
          } else if (darkModeMediaQuery.addListener) {
            // Older browser support
            darkModeMediaQuery.addListener(e => {
              document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');
            });
          }
        } catch (e) {
          console.warn('Dark mode detection not supported in this browser');
        }
      }

      // Run as soon as possible to prevent flash of wrong theme
      setDarkModeIfPreferred();

      // Also apply dark mode class to body for stronger CSS targeting
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.addEventListener('DOMContentLoaded', function() {
          document.body.classList.add('dark-mode');
        });
      }
    </script>
  </head>
  <body class="dark-mode-replit">
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Safari favicon fix -->
    <script>
      // This forces Safari to reload the favicon by changing the href slightly
      window.onload = function() {
        // Check if it's Safari
        if (navigator.userAgent.indexOf('Safari') != -1 && 
            navigator.userAgent.indexOf('Chrome') == -1) {
          
          // Get all favicon links
          var links = document.querySelectorAll('link[rel*="icon"]');
          
          // Add a cache-busting parameter
          links.forEach(function(link) {
            link.href = link.href + '?v=' + new Date().getTime();
          });
        }
      };
    </script>


    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script
      type="text/javascript"
      src="https://replit.com/public/js/replit-dev-banner.js"
    ></script>
  </body>
</html>
